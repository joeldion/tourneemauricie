(()=>{"use strict";let e=!1;window.addEventListener("load",(function(){t()})),window.addEventListener("scroll",(function(){t()})),window.addEventListener("resize",(function(){t()}));const t=()=>{document.getElementById("map").getBoundingClientRect().top<=(window.pageYOffset||document.documentElement.scrollTop)-300&&!e&&(e=!0,o())};let a=[];const n=(new Date).getTime();var l;function o(){setTimeout((function(){let e=10;window.innerWidth<=767&&(e=9);const t={center:{lat:46.5195,lng:-72.6888536},zoom:e,mapTypeId:"roadmap",mapTypeControl:!1,styles:[{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#446D2B"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],backgroundColor:"#fff"},n=new google.maps.Map(document.getElementById("gmap"),t);let l,o,s,i;for(let e in a){let t=a[e];if(t.active)for(let e of t.data)l={position:new google.maps.LatLng(e.lat,e.lng),optimized:!1},o=new google.maps.Marker(l),o.setMap(n),o.setIcon(t.icon),s=new google.maps.InfoWindow,function(e,t){google.maps.event.addListener(e,"click",(function(a){i="<div class='marker' style='width:150px;min-height:100px'>",i+="<h4 class='marker__title'>"+t.title+"</h4>",i+="<a class='marker__address' href='"+t.gmap_url+"' target='_blank'>"+t.address+"</a>",i+="<a class='marker__website' href='"+t.website+"' target='_blank'>"+locals.more_info+"</a>",i+="</div>",s.setContent(i),s.open(n,e)}))}(o,e)}}),100)}(l=jQuery).getJSON({url:globals.mapDataTypesFile,cache:!1},(function(e){l.each(e,(function(e,t){let o={name:t.name,slug:t.slug,file:globals.mapDataFilePath+"map-data-"+t.slug+".json?v="+n,icon:globals.assetsPath+"icons/tma-marker.svg",data:[],active:!0};l.getJSON({url:o.file,cache:!1},(function(e){l.each(e,(function(e,t){o.data.push(t)}))})),a.push(o)}))}));const s=(e,t)=>{for(let n=0;n<a.length;n++)a[n].slug===e&&(a[n].active=t)},i=document.querySelectorAll(".map-filter");for(let e=0;e<i.length;e++)i[e].addEventListener("click",(function(){let t=i[e].dataset.category,a=i[e].querySelector(".map-filter__checkbox");a.classList.contains("unchecked")?(a.classList.remove("unchecked"),s(t,!0)):(a.classList.add("unchecked"),s(t,!1)),o()}))})();
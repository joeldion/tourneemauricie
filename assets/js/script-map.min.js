(()=>{"use strict";let e=!1;window.addEventListener("load",(function(){t()})),window.addEventListener("scroll",(function(){t()})),window.addEventListener("resize",(function(){t()}));const t=()=>{document.getElementById("map").getBoundingClientRect().top<=(window.pageYOffset||document.documentElement.scrollTop)-300&&!e&&(e=!0,l())};let n=[];var a;function l(){setTimeout((function(){let e=10;window.innerWidth<=767&&(e=9);const t={center:{lat:46.5195,lng:-72.6888536},zoom:e,mapTypeId:"roadmap",mapTypeControl:!1,styles:[{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#446D2B"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],backgroundColor:"#fff"},a=new google.maps.Map(document.getElementById("gmap"),t);let l,o,s,i;for(let e in n){let t=n[e];if(t.active)for(let e of t.data)l={position:new google.maps.LatLng(e.lat,e.lng),optimized:!1},o=new google.maps.Marker(l),o.setMap(a),o.setIcon(t.icon),s=new google.maps.InfoWindow,function(e,t){google.maps.event.addListener(e,"click",(function(n){i="<div class='marker' style='width:150px;min-height:100px'>",i+="<h4 class='marker__title'>"+t.title+"</h4>",i+="<a class='marker__address' href='"+t.gmap_url+"' target='_blank'>"+t.address+"</a>",i+="<a class='marker__website' href='"+t.website+"' target='_blank'>"+locals.more_info+"</a>",i+="</div>",s.setContent(i),s.open(a,e)}))}(o,e)}}),100)}(a=jQuery).getJSON(globals.mapDataTypesFile,(function(e){a.each(e,(function(e,t){let l={name:t.name,slug:t.slug,file:globals.mapDataFilePath+"map-data-"+t.slug+".json",icon:globals.assetsPath+"icons/tma-marker.svg",data:[],active:!0};a.getJSON(l.file,(function(e){a.each(e,(function(e,t){l.data.push(t)}))})),n.push(l)}))}));const o=(e,t)=>{for(let a=0;a<n.length;a++)n[a].slug===e&&(n[a].active=t)},s=document.querySelectorAll(".map-filter");for(let e=0;e<s.length;e++)s[e].addEventListener("click",(function(){let t=s[e].dataset.category,n=s[e].querySelector(".map-filter__checkbox");n.classList.contains("unchecked")?(n.classList.remove("unchecked"),o(t,!0)):(n.classList.add("unchecked"),o(t,!1)),l()}))})();